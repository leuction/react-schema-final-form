import React from"react";import Ajv from"ajv";var getWidget=function(e){var t=e.schema,r=void 0===t?{}:t,o=e.theme,a=void 0===o?{}:o;return r.widget?r.widget:r.hasOwnProperty("enum")?"choice":r.format&&a[r.format]?r.format:r.type||"object"},renderField=function(e){var t=e.schema,r=void 0===t?{}:t,o=e.fieldName,a=void 0===o?"":o,n=e.theme,i=void 0===n?{}:n,s=e.required,c=void 0!==s&&s,u=e.mutators,l=void 0===u?{}:u,p=getWidget({schema:r,theme:i});if(!i[p])throw new Error('We do not support the widget "'+p+'" right now, are you forget to import the widget into the theme?');return React.createElement(i[p],{key:a,fieldName:a,required:c,schema:r,theme:i,mutators:l})},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},isObject=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e&&!Array.isArray(e)},resolveRef=function(e,t){return(e=e.replace("#/","")).split("/").reduce(function(e,t){return e[t]},t)},compileSchema=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isObject(t)){var o={};return Object.keys(t).forEach(function(a){"$ref"===a?o=e(resolveRef(t[a],r),r):o[a]=e(t[a],r)}),o}return Array.isArray(t)?t.map(function(t){return e(t,r)}):t},compileRefs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return compileSchema(e,e)},isReuqired=function(e){var t=e.schema,r=void 0===t?{}:t,o=e.fieldName,a=void 0===o?"":o;return!!r.required&&-1!==r.required.indexOf(a)},renderObjectProperties=function(e){var t=e.schema,r=void 0===t?{}:t,o=e.theme,a=void 0===o?{}:o,n=e.mutators,i=void 0===n?{}:n,s=e.fieldName,c=void 0===s?"":s;return Object.keys(r.properties).map(function(e){return{propertyName:e,propertyOrder:r.properties[e].propertyOrder}}).sort(function(e,t){return e.propertyOrder&&t.propertyOrder?e.propertyOrder-t.propertyOrder:0}).map(function(e){return renderField({schema:r.properties[e.propertyName],fieldName:c?c+"."+e.propertyName:e.propertyName,theme:a,required:isReuqired({schema:r,fieldName:e.propertyName}),mutators:i})})},commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol$1=root.Symbol,splice=arrayProto.splice,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){return this.__data__[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),!0)}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,o=assocIndexOf(r,e);return o<0?r.push([e,t]):r[o][1]=t,this}function MapCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function assignValue(e,t,r){var o=e[t];hasOwnProperty.call(e,t)&&eq(o,r)&&(void 0!==r||t in e)||(e[t]=r)}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseIsNative(e){return!(!isObject$1(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor).test(toSource(e))}function baseSet(e,t,r,o){if(!isObject$1(e))return e;for(var a=-1,n=(t=isKey(t,e)?[t]:castPath(t)).length,i=n-1,s=e;null!=s&&++a<n;){var c=toKey(t[a]),u=r;if(a!=i){var l=s[c];void 0===(u=o?o(l,c,s):void 0)&&(u=isObject$1(l)?l:isIndex(t[a+1])?[]:{})}assignValue(s,c,u),s=s[c]}return e}function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function castPath(e){return isArray(e)?e:stringToPath(e)}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isKey(e,t){if(isArray(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var stringToPath=memoize(function(e){e=toString(e);var t=[];return reLeadingDot.test(e)&&t.push(""),e.replace(rePropName,function(e,r,o,a){t.push(o?a.replace(reEscapeChar,"$1"):r||e)}),t});function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function memoize(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],n=r.cache;if(n.has(a))return n.get(a);var i=e.apply(this,o);return r.cache=n.set(a,i),i};return r.cache=new(memoize.Cache||MapCache),r}function eq(e,t){return e===t||e!=e&&t!=t}memoize.Cache=MapCache;var isArray=Array.isArray;function isFunction(e){var t=isObject$1(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isObject$1(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toString(e){return null==e?"":baseToString(e)}function set$1(e,t,r){return null==e?e:baseSet(e,t,r)}var lodash_set=set$1,setError=function(e,t,r){var o="."===e.dataPath.charAt(0)?e.dataPath.slice(1):e.dataPath;return lodash_set(r,o,e.message),r},buildSyncValidation=function(e){var t=new Ajv({allErrors:!0,errorDataPath:"property"});return function(r){return t.validate(e,r)?{}:t.errors.reduce(function(t,r){return setError(r,e,t)},{})}},renderSchema=function(e){var t=e.schema,r=void 0===t?{}:t,o=e.theme,a=void 0===o?{}:o,n=e.mutators,i=void 0===n?{}:n;if(!r.type)return React.createElement("div",null);if("object"!==r.type)throw new Error("We only support the outermost layer of JSON to be object");return renderField({schema:r,theme:a,mutators:i})};export{compileRefs,renderField,renderObjectProperties,buildSyncValidation};export default renderSchema;
//# sourceMappingURL=index.js.map
